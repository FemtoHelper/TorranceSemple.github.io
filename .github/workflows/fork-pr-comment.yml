name: Fork PR Instructions
on:
  pull_request_target:
    types: [opened]
jobs:
  comment-on-fork:
    if: github.event.pull_request.head.repo.fork == true
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const forkOwner = context.payload.pull_request.head.repo.owner.login;
            const branch = context.payload.pull_request.head.ref;
            const repoName = context.payload.pull_request.head.repo.name;
            
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `ðŸ‘‹ Thanks for your contribution from a fork!

              **Note:** The "Deploy PR previews" check below will fail - this is expected and normal for fork PRs due to security restrictions.
              
              **To preview your changes:**
              
              1. Go to your fork's Pages settings: https://github.com/${forkOwner}/${repoName}/settings/pages
              2. Under "Source", select **Deploy from a branch**
              3. Select **main** branch and **/ (root)**, then click **Save**
              4. Wait 1-2 minutes for deployment to complete
              5. Check the Actions tab for the "pages-build-deployment" workflow
              6. Once complete, your preview will be at: https://${forkOwner}.github.io/${repoName}/
              
              The failing check won't prevent your PR from being merged!`
              });
