name: Fork PR Instructions
on:
  pull_request:
    types: [opened]
jobs:
  comment-on-fork:
    if: github.event.pull_request.head.repo.fork == true
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const forkOwner = context.payload.pull_request.head.repo.owner.login;
            const branch = context.payload.pull_request.head.ref;
            const repoName = context.payload.pull_request.head.repo.name;
            
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `ðŸ‘‹ Thanks for your contribution from a fork!

              To preview your changes:
              1. Enable GitHub Pages on your fork at: https://github.com/${forkOwner}/${repoName}/settings/pages
              2. Set Source to "Deploy from a branch"  
              3. Select \`gh-pages\` branch
              4. Your preview will be at: https://${forkOwner}.github.io/${repoName}/
              
              Make sure Actions and workflow permissions are enabled on your fork!`
              });
