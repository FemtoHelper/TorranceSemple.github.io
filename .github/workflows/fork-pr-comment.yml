name: Fork PR Instructions
on:
  pull_request_target:
    types: [opened]
jobs:
  comment-on-fork:
    if: github.event.pull_request.head.repo.fork == true
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const forkOwner = context.payload.pull_request.head.repo.owner.login;
            const branch = context.payload.pull_request.head.ref;
            const repoName = context.payload.pull_request.head.repo.name;
            
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `ðŸ‘‹ Thanks for your contribution from a fork!

              **Your branch preview will automatically deploy to:**
              https://${forkOwner}.github.io/${repoName}/branch-preview/${branch}/
              
              **One-time setup on your fork:**
              1. Enable Actions (if not already enabled)
              2. Go to Pages settings: https://github.com/${forkOwner}/${repoName}/settings/pages
              3. Under "Source", select **Deploy from a branch**
              4. Select **gh-pages** branch and **/ (root)**, then click **Save**
              5. Wait 1-2 minutes for deployment
              
              **Note:** The "Deploy PR previews" check will be skipped for fork PRs.`
            });
